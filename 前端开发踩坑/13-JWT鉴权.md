### 1、需求背景

后端接口，对用户请求进行鉴权，使用JWT 。

在整个鉴权当中，前后端都需要做。前端需要隐藏对用户不应当可见的组件。而后端需要防止各种意外情况，所以后端同样需要鉴权。

JWT ，json wen token ，是一种认证的格式。包括三部分：

* header：头部，用来存放 JWT 的类型，和编码格式。通常base64格式
* payload：信息存放的位置。用来存放信息
* signature：包含了header、payload、secret_key 等综合信息
* secret_key 是密钥，存放在服务端

用户在前端登录时，由后端生成 JWT，然后返回给前端，前端存放在本地。

然后每次发起请求时，都在约定好的请求头内，加入存放的JWT。

如果后端鉴权成功，则返回数据；如果后端鉴权失败，则按照约定返回错误信息，然后前端处理，对本地存储的JWT进行清理，或者刷新（可以存两个token，一个用来刷新，一个用来存放真正的token）。

所以，前端一般是只有在登录时，才会存下 两个token（一个存放信息的，一个存放刷新时间的）。然后其他时候，都是请求时，给后端返回token。

在任何发生错误的情况下，都重新刷新页面。在router是history的情况下，刷新页面，会回到首页，然后再次进行登录。